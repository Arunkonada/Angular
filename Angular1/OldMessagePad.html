<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <link href="bootstrap-3.3.6-dist/css/bootstrap.min.css" rel="stylesheet" />
    <link href="bootstrap-3.3.6-dist/css/bootstrap-theme.min.css" rel="stylesheet" />
</head>
<body ng-app="dialPad" ng-controller="dialController" >
    <br />
    <h2 style="margin-left: 400px;">Old Cell Phones Message Pad</h2>
    <br />
    <input  id="msg" readonly value="{{dial}}" class="form-control" />
    <br />
    <br />
    <br />
    <div class="form-inline">
        <div style="margin-left: 447px;margin-top: -89px;" class="btn-group" role="group" aria-label="...">
            <div class="btn-group btn-group-lg" role="group">
                <button type="button" class="btn btn-default" ng-click="mainLogic('one')">1(.,?)</button>
            </div>
            <div class="btn-group btn-group-lg" role="group">
                <button type="button" class="btn btn-default" ng-click="mainLogic('two')">2(ABC)</button>
            </div>
            <div class="btn-group btn-group-lg" role="group">
                <button type="button" class="btn btn-default" ng-click="mainLogic('three')">3(DEF)</button>
            </div>
        </div>
        <br />
        <div style="margin-left: 442px;margin-top: -34px;" class="btn-group" role="group" aria-label="...">
            <div class="btn-group btn-group-lg" role="group">
                <button type="button" class="btn btn-default" ng-click="mainLogic('four')">4(GHI)</button>
            </div>
            <div class="btn-group btn-group-lg" role="group">
                <button type="button" class="btn btn-default" ng-click="mainLogic('five')">5(JKL)</button>
            </div>
            <div class="btn-group btn-group-lg" role="group">
                <button type="button" class="btn btn-default" ng-click="mainLogic('six')">6(MNO)</button>
            </div>
        </div>
        <br />
        <div style="margin-left: 427px;margin-top: -3px;" class="btn-group" role="group" aria-label="...">
            <div class="btn-group btn-group-lg" role="group">
                <button type="button" class="btn btn-default" ng-click="mainLogic('seven')">7(PQRS)</button>
            </div>
            <div class="btn-group btn-group-lg" role="group">
                <button type="button" class="btn btn-default" ng-click="mainLogic('eigth')">8(TUV)</button>
            </div>
            <div class="btn-group btn-group-lg" role="group">
                <button type="button" class="btn btn-default" ng-click="mainLogic('nine')">9(WXYZ)</button>
            </div>
        </div>
        <div style="margin-left: 470px;margin-top: 0px;" class="btn-group" role="group" aria-label="...">
            <div class="btn-group btn-group-lg" role="group">
                <button type="button" class="btn btn-default" ng-click="space()">Space</button>
            </div>
            <div class="btn-group btn-group-lg" role="group">
                <button type="button" class="btn btn-default" ng-click="backSpace()">Back-Space</button>
            </div>
        </div>
       </div>
    <script src="Scripts/angular.min.js"></script>
    <script>
        angular.module('dialPad', []).controller('dialController', function ($scope) {
            var mesaage = "", timeSequence = 2000,
            dialObject = {
                one: { array: ['.', '?', 1], compareTime: 0, i: undefined, j: undefined },
                two: { array: ['A', 'B', 'C',2], compareTime: 0, i: undefined, j: undefined },
                three: { array: ['D', 'E', 'F', 3], compareTime: 0, i: undefined, j: undefined },
                five: { array: ['J', 'K', 'L', 5], compareTime: 0, i: undefined, j: undefined },
                four: { array: ['G', 'H', 'I', 4], compareTime: 0, i: undefined, j: undefined },
                six: { array: ['M', 'N', 'O', 6], compareTime: 0, i: undefined, j: undefined },
                seven: { array: ['P', 'Q', 'R', 'S', 7], compareTime: 0, i: undefined, j: undefined },
                eigth: { array: ['T', 'U', 'V', 8], compareTime: 0, i: undefined, j: undefined },
                nine: { array: ['W', 'X', 'Y', 'Z', 9], compareTime: 0, i: undefined, j: undefined }
            };
            $scope.dial = mesaage;
            $scope.space = function () {
                mesaage = mesaage + " ";
                $scope.dial = mesaage;
            };
            $scope.backSpace = function () {
                var newMessage = mesaage.substring(0, mesaage.length - 1);
                mesaage = newMessage;
                $scope.dial = newMessage;
            };
            $scope.mainLogic = function (arrayType) {
                 var obj = { 1: 'one', 2: 'two', 3: 'three', 4: 'four', 5: 'five', 6: 'six', 7: 'seven', 8: 'eigth', 9: 'nine' };
                    for (var k = 1, l = 10; k < l; k++) {
                        if (obj[k] != arrayType)
                        {
                            dialObject[obj[k]]['compareTime'] = 0;
                            dialObject[obj[k]]['i'] = undefined;
                        } 
                    }
                    var t2 = performance.now();
                    if (dialObject[arrayType]['i'] == 0 || parseInt(t2.toString().split("."), 10) <= (dialObject[arrayType]['compareTime'] + timeSequence)) {
                        dialObject[arrayType]['compareTime'] = parseInt(t2.toString().split("."), 10);
                        dialObject[arrayType]['j']++;
                        if (dialObject[arrayType]['j'] != 0) {
                            if (dialObject[arrayType]['i'] < dialObject[arrayType]['array'].length - 1) {
                                dialObject[arrayType]['array'][dialObject[arrayType]['i']++];
                            }
                            else {
                                dialObject[arrayType]['i'] = 0;
                            }
                        }
                        if (parseInt(t2.toString().split("."), 10) <= (dialObject[arrayType]['compareTime'] + timeSequence)) {
                            mesaage = mesaage.substring(0, mesaage.length - 1);
                        }
                        mesaage = mesaage + dialObject[arrayType]['array'][dialObject[arrayType]['i']];
                    }
                    else {
                        dialObject[arrayType]['compareTime'] = 0; dialObject[arrayType]['i'] = 0; dialObject[arrayType]['j'] = 0;
                        mesaage = mesaage + dialObject[arrayType]['array'][dialObject[arrayType]['i']];
                    }
                    $scope.dial = mesaage;
            };
        });
    </script>
</body>
</html>
